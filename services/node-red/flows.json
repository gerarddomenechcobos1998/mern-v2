[{"id":"6e336c2d.841474","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"9b383b8.bfdc4c8","type":"subflow","name":"DB Read","info":"","category":"storage","in":[{"x":140,"y":160,"wires":[{"id":"47e379db.dc2028"}]}],"out":[{"x":720,"y":160,"wires":[{"id":"fed4730c.6d399","port":0}]}],"env":[{"name":"collection","type":"str","value":""}],"meta":{"version":"1.0.0","author":"gerard.domenech.cobos@gmail.com"},"color":"#C7E9C0","icon":"node-red/leveldb.png"},{"id":"2d6b3583.c330fa","type":"subflow","name":"DB Read One","info":"","category":"storage","in":[{"x":60,"y":100,"wires":[{"id":"8d91ca76.b05bc8"}]}],"out":[{"x":720,"y":100,"wires":[{"id":"e55c848b.66f9b8","port":0}]}],"env":[{"name":"collection","type":"str","value":""}],"meta":{},"color":"#C7E9C0","icon":"node-red/leveldb.png"},{"id":"dcd3313f.ac9ce","type":"mongodb3","uri":"mongodb://mongo","name":"","options":"","parallelism":"-1"},{"id":"1db62708.35ddb9","type":"mongodb3 in","z":"6e336c2d.841474","service":"_ext_","configNode":"dcd3313f.ac9ce","name":"DataBase Actions","collection":"","operation":"insert","x":1330,"y":220,"wires":[["6d0ff93b.4c6898"]]},{"id":"9825122a.e55ae","type":"http in","z":"6e336c2d.841474","name":"","url":"/api/activity","method":"post","upload":false,"swaggerDoc":"","x":880,"y":220,"wires":[["3a54b512.ea4b4a"]]},{"id":"6d0ff93b.4c6898","type":"http response","z":"6e336c2d.841474","name":"","statusCode":"","headers":{},"x":1590,"y":220,"wires":[]},{"id":"15ea1cab.664653","type":"http in","z":"6e336c2d.841474","name":"","url":"/api/activity","method":"get","upload":false,"swaggerDoc":"","x":700,"y":300,"wires":[["e0296914.4c7548"]]},{"id":"2b9d2285.5e8d3e","type":"mongodb3 in","z":"6e336c2d.841474","service":"_ext_","configNode":"dcd3313f.ac9ce","name":"DataBase Actions","collection":"","operation":"find.toArray","x":1330,"y":300,"wires":[["e25a66ac.5170b8"]]},{"id":"e25a66ac.5170b8","type":"http response","z":"6e336c2d.841474","name":"","statusCode":"","headers":{},"x":1590,"y":300,"wires":[]},{"id":"bf227bf3.afeb58","type":"comment","z":"6e336c2d.841474","name":"README","info":"Name of mongo connection should be same name as the one of the container in which mongo is running","x":1300,"y":180,"wires":[]},{"id":"58d7b9bd.b068c8","type":"http in","z":"6e336c2d.841474","name":"","url":"/api/activity/:id","method":"get","upload":false,"swaggerDoc":"","x":710,"y":380,"wires":[["3c234e6f.da2c42"]]},{"id":"b2124f8a.d0a86","type":"mongodb3 in","z":"6e336c2d.841474","service":"_ext_","configNode":"dcd3313f.ac9ce","name":"DataBase Actions","collection":"","operation":"","x":1330,"y":380,"wires":[["4c577274.0d8b6c"]]},{"id":"4c577274.0d8b6c","type":"http response","z":"6e336c2d.841474","name":"","statusCode":"","headers":{},"x":1590,"y":380,"wires":[]},{"id":"77a78367.1cb58c","type":"debug","z":"6e336c2d.841474","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1330,"y":460,"wires":[]},{"id":"47e379db.dc2028","type":"change","z":"9b383b8.bfdc4c8","name":"","rules":[{"t":"set","p":"collection","pt":"msg","to":"collection","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":300,"y":160,"wires":[["fed4730c.6d399"]]},{"id":"fed4730c.6d399","type":"change","z":"9b383b8.bfdc4c8","name":"","rules":[{"t":"set","p":"operation","pt":"msg","to":"find.toArray","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":160,"wires":[[]]},{"id":"3a54b512.ea4b4a","type":"change","z":"6e336c2d.841474","name":"","rules":[{"t":"set","p":"collection","pt":"msg","to":"test","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1070,"y":220,"wires":[["1db62708.35ddb9"]]},{"id":"f91eb7d3.e8d948","type":"subflow:9b383b8.bfdc4c8","z":"6e336c2d.841474","name":"","env":[{"name":"collection","value":"test","type":"str"}],"x":1080,"y":300,"wires":[["2b9d2285.5e8d3e"]]},{"id":"e0296914.4c7548","type":"change","z":"6e336c2d.841474","name":"db query","rules":[{"t":"set","p":"payload","pt":"msg","to":"{}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":300,"wires":[["f91eb7d3.e8d948"]]},{"id":"8d91ca76.b05bc8","type":"change","z":"2d6b3583.c330fa","name":"","rules":[{"t":"set","p":"collection","pt":"msg","to":"collection","tot":"env"}],"action":"","property":"","from":"","to":"","reg":false,"x":250,"y":100,"wires":[["e55c848b.66f9b8"]]},{"id":"e55c848b.66f9b8","type":"change","z":"2d6b3583.c330fa","name":"","rules":[{"t":"set","p":"operation","pt":"msg","to":"findOne","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":470,"y":100,"wires":[[]]},{"id":"b9b02dfa.c65e7","type":"subflow:2d6b3583.c330fa","z":"6e336c2d.841474","name":"","env":[{"name":"collection","value":"test","type":"str"}],"x":1090,"y":380,"wires":[["b2124f8a.d0a86","77a78367.1cb58c","c77f4666.0398e8","88335a42.43be18","6f96561e.916828"]]},{"id":"3c234e6f.da2c42","type":"change","z":"6e336c2d.841474","name":"db query","rules":[{"t":"set","p":"payload","pt":"msg","to":"{\"key1\": msg.req.params.id}","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":900,"y":380,"wires":[["b9b02dfa.c65e7"]]},{"id":"c77f4666.0398e8","type":"debug","z":"6e336c2d.841474","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"operation","targetType":"msg","statusVal":"","statusType":"auto","x":1340,"y":500,"wires":[]},{"id":"88335a42.43be18","type":"debug","z":"6e336c2d.841474","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"req.params.id","targetType":"msg","statusVal":"","statusType":"auto","x":1350,"y":540,"wires":[]},{"id":"6f96561e.916828","type":"debug","z":"6e336c2d.841474","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"collection","targetType":"msg","statusVal":"","statusType":"auto","x":1340,"y":580,"wires":[]}]